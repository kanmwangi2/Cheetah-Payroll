"use strict";(self.webpackChunkcheetah_payroll=self.webpackChunkcheetah_payroll||[]).push([[792],{3:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=[{q:"How do I add a new staff member?",a:"Go to Staff section and use the Add Staff form."},{q:"How do I import data?",a:"Use the Import/Export buttons in each section (Staff, Payments, Deductions)."},{q:"How is payroll calculated?",a:"Payroll uses Rwanda tax law and the calculation sequence described in Blueprint.md."},{q:"How do I contact support?",a:"See the Support section below."}];t.default=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Utilities & Support"}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"FAQ"}),(0,a.jsx)("ul",{children:s.map((e,t)=>(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:e.q}),(0,a.jsx)("br",{}),e.a]},t))})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"Documentation"}),(0,a.jsxs)("p",{children:["See ",(0,a.jsx)("a",{href:"./Blueprint.md",target:"_blank",rel:"noopener noreferrer",children:"Blueprint.md"})," for full product documentation and technical details."]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"Support"}),(0,a.jsxs)("p",{children:["Email: support@cheetahpayroll.com",(0,a.jsx)("br",{}),"Phone: +250 123 456 789"]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{children:"System Information"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Version: 1.0"}),(0,a.jsx)("li",{children:"Last Updated: July 2025"})]})]})]})},9:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(38),l={type:"",amount:"",staff_id:"",balance:""};t.default=({companyId:e,onAdded:t})=>{const[n,o]=(0,s.useState)(l),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),p=(e,t)=>{o(n=>({...n,[e]:t}))};return(0,a.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),c(!0),u(null);try{await(0,r.createDeduction)(e,n),o(l),t()}catch(e){u(e.message||"Failed to add deduction")}finally{c(!1)}},children:[(0,a.jsx)("h3",{children:"Add Deduction"}),(0,a.jsx)("input",{placeholder:"Type",value:n.type,onChange:e=>p("type",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Amount",value:n.amount,onChange:e=>p("amount",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Employee ID",value:n.staff_id,onChange:e=>p("staff_id",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Balance",value:n.balance,onChange:e=>p("balance",e.target.value)}),(0,a.jsx)("button",{type:"submit",disabled:i,children:i?"Adding...":"Add Deduction"}),d&&(0,a.jsx)("div",{style:{color:"red"},children:d})]})}},10:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStaff=async function(e){return(await(0,a.getDocs)((0,a.collection)(s,"companies",e,"staff"))).docs.map(e=>({id:e.id,...e.data()}))},t.createStaff=async function(e,t){return(0,a.addDoc)((0,a.collection)(s,"companies",e,"staff"),t)},t.updateStaff=async function(e,t,n){return(0,a.updateDoc)((0,a.doc)(s,"companies",e,"staff",t),n)},t.deleteStaff=async function(e,t){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e,"staff",t))},t.getStaffProfile=async function(e,t){const n=await(0,a.getDoc)((0,a.doc)(s,"companies",e,"staff",t));return n.exists()?{id:n.id,...n.data()}:null};const a=n(815),s=(0,a.getFirestore)()},38:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDeductions=async function(e){return(await(0,a.getDocs)((0,a.collection)(s,"companies",e,"deductions"))).docs.map(e=>({id:e.id,...e.data()}))},t.createDeduction=async function(e,t){return(0,a.addDoc)((0,a.collection)(s,"companies",e,"deductions"),t)},t.updateDeduction=async function(e,t,n){return(0,a.updateDoc)((0,a.doc)(s,"companies",e,"deductions",t),n)},t.deleteDeduction=async function(e,t){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e,"deductions",t))},t.getDeduction=async function(e,t){const n=await(0,a.getDoc)((0,a.doc)(s,"companies",e,"deductions",t));return n.exists()?{id:n.id,...n.data()}:null};const a=n(815),s=(0,a.getFirestore)()},50:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(10);t.default=({companyId:e,staffId:t,onClose:n})=>{const[l,o]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(!0),[f,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(0,r.getStaffProfile)(e,t).then(e=>{o(e),u(e)}).catch(e=>m(e.message||"Failed to load profile")).finally(()=>h(!1))},[e,t]);const y=(e,t,n)=>{u(a=>({...a,[e]:{...a[e],[t]:n}}))};return p?(0,a.jsx)("div",{children:"Loading profile..."}):f?(0,a.jsx)("div",{style:{color:"red"},children:f}):l?(0,a.jsxs)("div",{style:{border:"1px solid #ccc",padding:16,margin:16},children:[(0,a.jsx)("button",{onClick:n,children:"Close"}),(0,a.jsx)("h3",{children:"Staff Profile"}),i?(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{value:d.personalDetails.firstName,onChange:e=>y("personalDetails","firstName",e.target.value)}),(0,a.jsx)("input",{value:d.personalDetails.lastName,onChange:e=>y("personalDetails","lastName",e.target.value)}),(0,a.jsx)("button",{onClick:async()=>{h(!0),m(null);try{await(0,r.updateStaff)(e,t,d),o(d),c(!1)}catch(e){m(e.message||"Failed to update profile")}finally{h(!1)}},children:"Save"})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:["First Name: ",l.personalDetails.firstName]}),(0,a.jsxs)("div",{children:["Last Name: ",l.personalDetails.lastName]}),(0,a.jsx)("button",{onClick:()=>c(!0),children:"Edit"})]})]}):(0,a.jsx)("div",{children:"Profile not found."})}},176:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(641),l=[{min:0,max:6e4,rate:0},{min:60001,max:1e5,rate:10},{min:100001,max:2e5,rate:20},{min:200001,max:null,rate:30}],o={employee:6,employer:8},i={employee:.3,employer:.3},c={employee:.5,employer:0},d={employee:7.5,employer:7.5};t.default=({companyId:e})=>{const[t,n]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),[m,y]=(0,s.useState)(0),[j,x]=(0,s.useState)({gross:"",basic:"",transport:"",otherDeductions:""}),[g,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{(0,r.getPayrolls)(e).then(n).catch(e=>f(e.message||"Failed to load payrolls")).finally(()=>p(!1))},[e,m]);const b=(e,t)=>{x(n=>({...n,[e]:t}))};return u?(0,a.jsx)("div",{children:"Loading payrolls..."}):h?(0,a.jsx)("div",{style:{color:"red"},children:h}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Payrolls"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Create Payroll"}),(0,a.jsx)("input",{placeholder:"Gross Pay",value:j.gross,onChange:e=>b("gross",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Basic Pay",value:j.basic,onChange:e=>b("basic",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Transport Allowance",value:j.transport,onChange:e=>b("transport",e.target.value)}),(0,a.jsx)("input",{placeholder:"Other Deductions",value:j.otherDeductions,onChange:e=>b("otherDeductions",e.target.value)}),(0,a.jsx)("button",{onClick:()=>{const e=parseFloat(j.gross),t=parseFloat(j.basic),n=parseFloat(j.transport),a=parseFloat(j.otherDeductions)||0,s=(0,r.calculatePayroll)({gross:e,basic:t,transport:n,brackets:l,pensionRates:o,maternityRates:i,cbhiRates:c,ramaRates:d,otherDeductions:a});v(s)},children:"Calculate"}),g&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"Calculation Result"}),(0,a.jsx)("pre",{children:JSON.stringify(g,null,2)}),(0,a.jsx)("button",{onClick:async()=>{try{await(0,r.createPayroll)(e,{...j,...g}),y(e=>e+1),x({gross:"",basic:"",transport:"",otherDeductions:""}),v(null)}catch(e){f(e.message||"Failed to create payroll")}},children:"Save Payroll"})]})]}),(0,a.jsx)("h3",{children:"Payroll List"}),0===t.length?(0,a.jsx)("div",{children:"No payrolls found."}):(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Gross"}),(0,a.jsx)("th",{children:"Net"}),(0,a.jsx)("th",{children:"PAYE"}),(0,a.jsx)("th",{children:"Pension (Emp/Er)"}),(0,a.jsx)("th",{children:"Maternity (Emp/Er)"}),(0,a.jsx)("th",{children:"RAMA (Emp/Er)"}),(0,a.jsx)("th",{children:"CBHI"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.gross}),(0,a.jsx)("td",{children:e.finalNet}),(0,a.jsx)("td",{children:e.paye}),(0,a.jsxs)("td",{children:[e.pensionEmployee," / ",e.pensionEmployer]}),(0,a.jsxs)("td",{children:[e.maternityEmployee," / ",e.maternityEmployer]}),(0,a.jsxs)("td",{children:[e.ramaEmployee," / ",e.ramaEmployer]}),(0,a.jsx)("td",{children:e.cbhiEmployee})]},e.id))})]})]})}},180:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=a(n(809)),o=n(10);t.default=({companyId:e,onImported:t,staff:n})=>{const a=(0,r.useRef)(null),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1);return(0,s.jsxs)("div",{style:{margin:"16px 0"},children:[(0,s.jsx)("h4",{children:"Import/Export Staff"}),(0,s.jsx)("input",{type:"file",accept:".csv",ref:a,onChange:async n=>{const a=n.target.files?.[0];a&&(c(!0),u(null),l.default.parse(a,{header:!0,complete:async n=>{try{for(const t of n.data)await(0,o.createStaff)(e,t);t()}catch(e){u(e.message||"Import failed")}finally{c(!1)}},error:e=>{u(e.message||"CSV parse error"),c(!1)}}))},disabled:i}),(0,s.jsx)("button",{onClick:()=>{h(!0);const e=l.default.unparse(n),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="staff_export.csv",s.click(),URL.revokeObjectURL(a),h(!1)},disabled:p||0===n.length,children:"Export CSV"}),d&&(0,s.jsx)("div",{style:{color:"red"},children:d})]})}},210:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=a(n(809)),o=n(38);t.default=({companyId:e,onImported:t,deductions:n})=>{const a=(0,r.useRef)(null),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1);return(0,s.jsxs)("div",{style:{margin:"16px 0"},children:[(0,s.jsx)("h4",{children:"Import/Export Deductions"}),(0,s.jsx)("input",{type:"file",accept:".csv",ref:a,onChange:async n=>{const a=n.target.files?.[0];a&&(c(!0),u(null),l.default.parse(a,{header:!0,complete:async n=>{try{for(const t of n.data)await(0,o.createDeduction)(e,t);t()}catch(e){u(e.message||"Import failed")}finally{c(!1)}},error:e=>{u(e.message||"CSV parse error"),c(!1)}}))},disabled:i}),(0,s.jsx)("button",{onClick:()=>{h(!0);const e=l.default.unparse(n),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="deductions_export.csv",s.click(),URL.revokeObjectURL(a),h(!1)},disabled:p||0===n.length,children:"Export CSV"}),d&&(0,s.jsx)("div",{style:{color:"red"},children:d})]})}},273:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(495),l=n(688);t.default=({onSelect:e})=>{const[t,n]=(0,s.useState)([]),[o,i]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{const e=l.auth.currentUser;e&&(0,r.getCompaniesForUser)(e.uid).then(n).catch(e=>d(e.message||"Failed to load companies")).finally(()=>i(!1))},[]),o?(0,a.jsx)("div",{children:"Loading companies..."}):c?(0,a.jsx)("div",{style:{color:"red"},children:c}):0===t.length?(0,a.jsx)("div",{children:"No companies found."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Select Company"}),(0,a.jsx)("ul",{children:t.map(t=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>e(t),children:t.name})},t.id))})]})}},407:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(10),l={personalDetails:{firstName:"",lastName:"",idNumber:"",rssbNumber:"",dateOfBirth:"",gender:"",maritalStatus:"",phone:"",email:"",address:"",emergencyContact:""},employmentDetails:{startDate:"",position:"",employmentType:"",department:""},bankDetails:{bankName:"",accountNumber:""}};t.default=({companyId:e,onAdded:t})=>{const[n,o]=(0,s.useState)(l),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),p=(e,t,n)=>{o(a=>({...a,[e]:{...a[e],[t]:n}}))};return(0,a.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),c(!0),u(null);try{await(0,r.createStaff)(e,n),o(l),t()}catch(e){u(e.message||"Failed to add staff")}finally{c(!1)}},children:[(0,a.jsx)("h3",{children:"Add Staff"}),(0,a.jsx)("input",{placeholder:"First Name",value:n.personalDetails.firstName,onChange:e=>p("personalDetails","firstName",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Last Name",value:n.personalDetails.lastName,onChange:e=>p("personalDetails","lastName",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"ID/Passport Number",value:n.personalDetails.idNumber,onChange:e=>p("personalDetails","idNumber",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"RSSB Number",value:n.personalDetails.rssbNumber,onChange:e=>p("personalDetails","rssbNumber",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Department",value:n.employmentDetails.department,onChange:e=>p("employmentDetails","department",e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",disabled:i,children:i?"Adding...":"Add Staff"}),d&&(0,a.jsx)("div",{style:{color:"red"},children:d})]})}},495:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCompaniesForUser=async function(e){const t=(0,a.query)((0,a.collection)(s,"companies"),(0,a.where)("userIds","array-contains",e));return(await(0,a.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))},t.createCompany=async function(e){return(0,a.addDoc)((0,a.collection)(s,"companies"),e)},t.updateCompany=async function(e,t){return(0,a.updateDoc)((0,a.doc)(s,"companies",e),t)},t.deleteCompany=async function(e){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e))},t.getCompany=async function(e){const t=await(0,a.getDoc)((0,a.doc)(s,"companies",e));return t.exists()?{id:t.id,...t.data()}:null},t.getUsersForCompany=async function(e){return(await(0,a.getDocs)((0,a.collection)(s,"companies",e,"users"))).docs.map(e=>({id:e.id,...e.data()}))},t.createUser=async function(e,t){return(0,a.addDoc)((0,a.collection)(s,"companies",e,"users"),t)},t.updateUser=async function(e,t,n){return(0,a.updateDoc)((0,a.doc)(s,"companies",e,"users",t),n)},t.deleteUser=async function(e,t){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e,"users",t))};const a=n(815),s=(0,a.getFirestore)()},509:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=n(10),o=a(n(407)),i=a(n(50)),c=a(n(180));t.default=({companyId:e})=>{const[t,n]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null),[h,f]=(0,r.useState)(0),[m,y]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(0,l.getStaff)(e).then(n).catch(e=>p(e.message||"Failed to load staff")).finally(()=>d(!1))},[e,h]),a?(0,s.jsx)("div",{children:"Loading staff..."}):u?(0,s.jsx)("div",{style:{color:"red"},children:u}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Staff List"}),(0,s.jsx)(o.default,{companyId:e,onAdded:()=>f(e=>e+1)}),(0,s.jsx)(c.default,{companyId:e,onImported:()=>f(e=>e+1),staff:t}),m&&(0,s.jsx)(i.default,{companyId:e,staffId:m,onClose:()=>y(null)}),0===t.length?(0,s.jsx)("div",{children:"No staff found."}):(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"First Name"}),(0,s.jsx)("th",{children:"Last Name"}),(0,s.jsx)("th",{children:"ID/Passport"}),(0,s.jsx)("th",{children:"Department"}),(0,s.jsx)("th",{children:"Profile"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.personalDetails?.firstName}),(0,s.jsx)("td",{children:e.personalDetails?.lastName}),(0,s.jsx)("td",{children:e.personalDetails?.idNumber}),(0,s.jsx)("td",{children:e.employmentDetails?.department}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>y(e.id),children:"View"})})]},e.id))})]})]})}},563:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=a(n(809)),o=n(649);t.default=({companyId:e,onImported:t,payments:n})=>{const a=(0,r.useRef)(null),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1);return(0,s.jsxs)("div",{style:{margin:"16px 0"},children:[(0,s.jsx)("h4",{children:"Import/Export Payments"}),(0,s.jsx)("input",{type:"file",accept:".csv",ref:a,onChange:async n=>{const a=n.target.files?.[0];a&&(c(!0),u(null),l.default.parse(a,{header:!0,complete:async n=>{try{for(const t of n.data)await(0,o.createPayment)(e,t);t()}catch(e){u(e.message||"Import failed")}finally{c(!1)}},error:e=>{u(e.message||"CSV parse error"),c(!1)}}))},disabled:i}),(0,s.jsx)("button",{onClick:()=>{h(!0);const e=l.default.unparse(n),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="payments_export.csv",s.click(),URL.revokeObjectURL(a),h(!1)},disabled:p||0===n.length,children:"Export CSV"}),d&&(0,s.jsx)("div",{style:{color:"red"},children:d})]})}},577:function(e,t,n){var a,s=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,s)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(a=function(e){return a=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},a(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=a(e),l=0;l<n.length;l++)"default"!==n[l]&&s(t,e,n[l]);return r(t,e),t}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(848),c=n(540),d=o(n(784)),u=o(n(273)),p=n(688),h=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(509)))),f=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(902)))),m=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(967)))),y=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(176)))),j=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(954)))),x=(0,c.lazy)(()=>Promise.resolve().then(()=>l(n(3))));t.default=()=>{const[e,t]=(0,c.useState)(null),[n,a]=(0,c.useState)(!0),[s,r]=(0,c.useState)(null);return(0,c.useEffect)(()=>{const e=(0,p.onUserChanged)(e=>{t(e),a(!1)});return()=>e()},[]),n?(0,i.jsx)("div",{children:"Loading..."}):e?s?(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Welcome to Cheetah Payroll"}),(0,i.jsxs)("p",{children:["User: ",e.email]}),(0,i.jsxs)("p",{children:["Company: ",s.name]}),(0,i.jsxs)(c.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading module..."}),children:[(0,i.jsx)("hr",{}),(0,i.jsx)(h,{companyId:s.id}),(0,i.jsx)("hr",{}),(0,i.jsx)(f,{companyId:s.id}),(0,i.jsx)("hr",{}),(0,i.jsx)(m,{companyId:s.id}),(0,i.jsx)("hr",{}),(0,i.jsx)(y,{companyId:s.id}),(0,i.jsx)("hr",{}),(0,i.jsx)(j,{companyId:s.id}),(0,i.jsx)("hr",{}),(0,i.jsx)(x,{})]})]}):(0,i.jsx)(u.default,{onSelect:r}):(0,i.jsx)(d.default,{onSuccess:()=>window.location.reload()})}},641:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePAYE=r,t.calculatePayroll=function({gross:e,basic:t,transport:n,brackets:a,pensionRates:s,maternityRates:l,cbhiRates:o,ramaRates:i,otherDeductions:c}){const d=r(e,a),u=e*(s.employee/100),p=e*(s.employer/100),h=e-(n||0),f=h*(l.employee/100),m=h*(l.employer/100),y=t*(i.employee/100),j=t*(i.employer/100),x=e-d-u-f-y,g=x*(o.employee/100);return{paye:d,pensionEmployee:u,pensionEmployer:p,maternityEmployee:f,maternityEmployer:m,ramaEmployee:y,ramaEmployer:j,cbhiEmployee:g,finalNet:x-g-(c||0)}},t.getPayrolls=async function(e){return(await(0,a.getDocs)((0,a.collection)(s,"companies",e,"payrolls"))).docs.map(e=>({id:e.id,...e.data()}))},t.createPayroll=async function(e,t){return(0,a.addDoc)((0,a.collection)(s,"companies",e,"payrolls"),t)},t.updatePayroll=async function(e,t,n){return(0,a.updateDoc)((0,a.doc)(s,"companies",e,"payrolls",t),n)},t.deletePayroll=async function(e,t){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e,"payrolls",t))},t.getPayroll=async function(e,t){const n=await(0,a.getDoc)((0,a.doc)(s,"companies",e,"payrolls",t));return n.exists()?{id:n.id,...n.data()}:null};const a=n(815),s=(0,a.getFirestore)();function r(e,t){let n=0,a=e;for(const s of t){const t=s.min,r=s.max??1/0,l=s.rate/100;if(e>t){const e=Math.min(a,r-t+1);if(n+=e*l,a-=e,a<=0)break}}return Math.round(n)}},649:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPayments=async function(e){return(await(0,a.getDocs)((0,a.collection)(s,"companies",e,"payments"))).docs.map(e=>({id:e.id,...e.data()}))},t.createPayment=async function(e,t){return(0,a.addDoc)((0,a.collection)(s,"companies",e,"payments"),t)},t.updatePayment=async function(e,t,n){return(0,a.updateDoc)((0,a.doc)(s,"companies",e,"payments",t),n)},t.deletePayment=async function(e,t){return(0,a.deleteDoc)((0,a.doc)(s,"companies",e,"payments",t))},t.getPayment=async function(e,t){const n=await(0,a.getDoc)((0,a.doc)(s,"companies",e,"payments",t));return n.exists()?{id:n.id,...n.data()}:null};const a=n(815),s=(0,a.getFirestore)()},688:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.auth=void 0,t.login=function(e,t){return(0,s.signInWithEmailAndPassword)(o,e,t)},t.logout=function(){return(0,s.signOut)(o)},t.onUserChanged=function(e){return(0,s.onAuthStateChanged)(o,e)};const a=n(958),s=n(52),r={apiKey:process.env.FIREBASE_API_KEY,authDomain:process.env.FIREBASE_AUTH_DOMAIN,projectId:process.env.FIREBASE_PROJECT_ID},l=(0,a.initializeApp)(r),o=(0,s.getAuth)(l);t.auth=o},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(649),l={type:"",amount:"",staff_id:"",is_gross:!0,effective_date:""};t.default=({companyId:e,onAdded:t})=>{const[n,o]=(0,s.useState)(l),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),p=(e,t)=>{o(n=>({...n,[e]:t}))};return(0,a.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),c(!0),u(null);try{await(0,r.createPayment)(e,n),o(l),t()}catch(e){u(e.message||"Failed to add payment")}finally{c(!1)}},children:[(0,a.jsx)("h3",{children:"Add Payment"}),(0,a.jsx)("input",{placeholder:"Type",value:n.type,onChange:e=>p("type",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Amount",value:n.amount,onChange:e=>p("amount",e.target.value),required:!0}),(0,a.jsx)("input",{placeholder:"Employee ID",value:n.staff_id,onChange:e=>p("staff_id",e.target.value),required:!0}),(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:n.is_gross,onChange:e=>p("is_gross",e.target.checked)})," Gross"]}),(0,a.jsx)("input",{placeholder:"Effective Date",value:n.effective_date,onChange:e=>p("effective_date",e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",disabled:i,children:i?"Adding...":"Add Payment"}),d&&(0,a.jsx)("div",{style:{color:"red"},children:d})]})}},784:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(848),s=n(540),r=n(688);t.default=({onSuccess:e})=>{const[t,n]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1);return(0,a.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),u(!0),c(null);try{await(0,r.login)(t,l),e()}catch(e){c(e.message||"Login failed")}finally{u(!1)}},children:[(0,a.jsx)("h2",{children:"Login"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:e=>n(e.target.value),required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>o(e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",disabled:d,children:d?"Logging in...":"Login"}),i&&(0,a.jsx)("div",{style:{color:"red"},children:i})]})}},900:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(338),l=a(n(577)),o=document.getElementById("root");o&&(0,r.createRoot)(o).render((0,s.jsx)(l.default,{}))},902:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=n(649),o=a(n(752)),i=a(n(563));t.default=({companyId:e})=>{const[t,n]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(0);return(0,r.useEffect)(()=>{(0,l.getPayments)(e).then(n).catch(e=>u(e.message||"Failed to load payments")).finally(()=>c(!1))},[e,p]),a?(0,s.jsx)("div",{children:"Loading payments..."}):d?(0,s.jsx)("div",{style:{color:"red"},children:d}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Payments"}),(0,s.jsx)(o.default,{companyId:e,onAdded:()=>h(e=>e+1)}),(0,s.jsx)(i.default,{companyId:e,onImported:()=>h(e=>e+1),payments:t}),0===t.length?(0,s.jsx)("div",{children:"No payments found."}):(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Amount"}),(0,s.jsx)("th",{children:"Employee"}),(0,s.jsx)("th",{children:"Gross/Net"}),(0,s.jsx)("th",{children:"Effective Dates"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.type}),(0,s.jsx)("td",{children:e.amount}),(0,s.jsx)("td",{children:e.staff_id}),(0,s.jsx)("td",{children:e.is_gross?"Gross":"Net"}),(0,s.jsx)("td",{children:e.effective_date})]},e.id))})]})]})}},954:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=n(815),o=a(n(809)),i=(0,l.getFirestore)();t.default=({companyId:e})=>{const[t,n]=(0,r.useState)(!1),[a,c]=(0,r.useState)(null),d=async t=>{n(!0),c(null);try{const n=await async function(e,t){return(await(0,l.getDocs)((0,l.collection)(i,"companies",e,t))).docs.map(e=>({id:e.id,...e.data()}))}(e,t),a=o.default.unparse(n),s=new Blob([a],{type:"text/csv"}),r=URL.createObjectURL(s),c=document.createElement("a");c.href=r,c.download=`${t}_report.csv`,c.click(),URL.revokeObjectURL(r)}catch(e){c(e.message||"Export failed")}finally{n(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Reports"}),(0,s.jsx)("button",{onClick:()=>d("payrolls"),disabled:t,children:"Export Payrolls"}),(0,s.jsx)("button",{onClick:()=>d("staff"),disabled:t,children:"Export Staff"}),(0,s.jsx)("button",{onClick:()=>d("payments"),disabled:t,children:"Export Payments"}),(0,s.jsx)("button",{onClick:()=>d("deductions"),disabled:t,children:"Export Deductions"}),a&&(0,s.jsx)("div",{style:{color:"red"},children:a})]})}},967:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(848),r=n(540),l=n(38),o=a(n(9)),i=a(n(210));t.default=({companyId:e})=>{const[t,n]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(0);return(0,r.useEffect)(()=>{(0,l.getDeductions)(e).then(n).catch(e=>u(e.message||"Failed to load deductions")).finally(()=>c(!1))},[e,p]),a?(0,s.jsx)("div",{children:"Loading deductions..."}):d?(0,s.jsx)("div",{style:{color:"red"},children:d}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Deductions"}),(0,s.jsx)(o.default,{companyId:e,onAdded:()=>h(e=>e+1)}),(0,s.jsx)(i.default,{companyId:e,onImported:()=>h(e=>e+1),deductions:t}),0===t.length?(0,s.jsx)("div",{children:"No deductions found."}):(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Amount"}),(0,s.jsx)("th",{children:"Employee"}),(0,s.jsx)("th",{children:"Balance"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.type}),(0,s.jsx)("td",{children:e.amount}),(0,s.jsx)("td",{children:e.staff_id}),(0,s.jsx)("td",{children:e.balance})]},e.id))})]})]})}}},e=>{e.O(0,[700,241,883,44],()=>e(e.s=900)),e.O()}]);